# ADR: Использовать OpenAPI Generator для генерации моделей data слоя
Статус: **Отклонено**

## Контекст
В команде используется подход API First, при котором перед разработкой функциональности разрабатывается и согласуется спефицикация в формате OpenAPI. Перед разработкой data слоя в Android хотелось бы автоматически генерировать модели на основе OpenAPI спецификации, что сократило бы время разработки и предостерегло бы от ошибок, связанных с человеческим фактором.

## Решение
- Использовать OpenAPI Generator
- Подключить OpenAPI Generator в проект как зависимость и написать Gradle-скрипт, который перед каждой сборкой приложения при изменениях в файле спецификации запускал бы генерацию моделей.

## Последствия
Преимущества:
+ Сокращение времени разработки на data слой за счет делегирования создания моделей автоматическому инструменту
+ Минимизация ошибок несоответствия OpenAPI контракту при его изменениях, т.к. необходимые изменения в коде генерируются автоматически

Недостатки:
- Необходимость настройки и написания Gradle-скрипта
- Необхоимость своевременно переносить новые версии спецификации к себе в репозиторий

## Альтернативы
- Ручное написание моделей (больше времени на разработку, больше вероятность ошибки, больше контроля над итоговым кодом)

## Причина отклонения
- Нестабильная работа с большими спецификациями, активно использующими фичи вроде additionalProperties:
  - Некорректная генерация иерархий классов (указывается interface вместо sealed interface), случайные баги (генерация двух контрукций вызова конструктора суперкласса в объявлении класса-наследника), невозможность скомпилировать код при использовании Kotlinx-Serialization
  - Некорректная генерация иерархий классов при использовании Gson (и нежелание использовать две библиотеки сериализации в одном проекте)

## Принятое решение
Ручное написание моделей